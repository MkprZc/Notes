## 悲观锁

悲观锁与乐观锁是人们定义出来的概念，你可以理解为一种思想，是处理并发资源的常用手段。不要把他们与mysql中提供的锁机制(表锁，行锁，排他锁，共享锁)混为一谈。


一、悲观锁
顾名思义，就是对于数掴的处理持悲观态度，总认为会发生并发冲突，获取和修改数时，别人会修改数据。所以在整个数据处理过程中，需要将数据锁定。悲观锁的实现，通常依靠数掴库提供的锁机制实现，比如mysql的排他锁，select..for update来实现悲观锁。


二、MySQL 悲观锁

例子:商品秒杀过程中，库存数量的减少，避免出现超卖的情况。

```sql
CREATE TABLE `tb_goods_stock` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
 `goods_id` bigint(20) unsigned DEFAULT '0' COMMENT '商品ID',
 `nums` int(11) unsigned DEFAULT '0' COMMENT '商品库存数量',
 `create_time` datetime DEFAULT NULL COMMENT '创建时间',
 `modify_time` datetime DEFAULT NULL COMMENT '更新时间',
 PRIMARY KEY (`id`),
 UNIQUE KEY `goods_id` (`goods_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='商品库存表';
```




